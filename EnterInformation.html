<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ThienJobs</title>
    <style>
        [x-cloak] {
            display: none
        }
    </style>
    <!-- Include the Alpine library on your page -->
    <script src="https://unpkg.com/alpinejs" defer></script>
    <!-- Include the TailwindCSS library on your page -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="shortcut icon" href="./icon.png">
    <link rel="stylesheet" href="./Reset.css">
    <link rel="stylesheet" href="/firebase.js">

    <script>
        const isLogin = localStorage.getItem("isLogin");

        if (!isLogin) {
            // Nếu trang yêu cầu bắt buộc phải đăng nhập thì thông báo và chuyển hướng
            alert("Bạn chưa đăng nhập");
            window.location.href = "./login.html";
        }
    </script>
</head>

<body class=" bg-gray-50">
    <div class="flex items-center justify-center w-full max-w-full">

        <section class="header w-full" style=" display: flex;
        flex-direction: column;">

            <section class="header">

                <section class="relative w-full px-8 text-gray-700 bg-white body-font"
                    data-tails-scripts="//unpkg.com/alpinejs" {!! $attributes ?? '' !!}>
                    <div
                        class="container flex flex-col flex-wrap items-center justify-between py-5 mx-auto md:flex-row max-w-7xl">
                        <a href="./index.html"
                            class="relative z-10 flex items-center w-auto text-2xl font-extrabold leading-none text-black select-none">ThienJobs</a>

                        <nav
                            class="top-0 left-0 z-0 flex items-center justify-center w-full h-full py-5 -ml-0 space-x-5 text-base md:-ml-5 md:py-0 md:absolute">

                            <a href="./index.html"
                                class="relative font-medium leading-6 text-gray-600 transition duration-150 ease-out hover:text-gray-900"
                                x-data="{ hover: false }" @mouseenter="hover = true" @mouseleave="hover = false">
                                <span class="block">Trang chủ</span>
                                <span class="absolute bottom-0 left-0 inline-block w-full h-0.5 -mb-1 overflow-hidden">
                                    <span x-show="hover"
                                        class="absolute inset-0 inline-block w-full h-1 h-full transform bg-gray-900"
                                        x-transition:enter="transition ease duration-200"
                                        x-transition:enter-start="scale-0" x-transition:enter-end="scale-100"
                                        x-transition:leave="transition ease-out duration-300"
                                        x-transition:leave-start="scale-100" x-transition:leave-end="scale-0"></span>
                                </span>
                            </a>

                            <a href="./JobApplication.html"
                                class="relative font-medium leading-6 text-gray-600 transition duration-150 ease-out hover:text-gray-900"
                                x-data="{ hover: false }" @mouseenter="hover = true" @mouseleave="hover = false">
                                <span class="block">Đơn xin việc</span>
                                <span class="absolute bottom-0 left-0 inline-block w-full h-0.5 -mb-1 overflow-hidden">
                                    <span x-show="hover"
                                        class="absolute inset-0 inline-block w-full h-1 h-full transform bg-gray-900"
                                        x-transition:enter="transition ease duration-200"
                                        x-transition:enter-start="scale-0" x-transition:enter-end="scale-100"
                                        x-transition:leave="transition ease-out duration-300"
                                        x-transition:leave-start="scale-100" x-transition:leave-end="scale-0"></span>
                                </span>
                            </a>

                            <a href="#_"
                                class="relative font-medium leading-6 text-gray-600 transition duration-150 ease-out hover:text-gray-900"
                                x-data="{ hover: false }" @mouseenter="hover = true" @mouseleave="hover = false">
                                <span class="block">Pricing</span>
                                <span class="absolute bottom-0 left-0 inline-block w-full h-0.5 -mb-1 overflow-hidden">
                                    <span x-show="hover"
                                        class="absolute inset-0 inline-block w-full h-1 h-full transform bg-gray-900"
                                        x-transition:enter="transition ease duration-200"
                                        x-transition:enter-start="scale-0" x-transition:enter-end="scale-100"
                                        x-transition:leave="transition ease-out duration-300"
                                        x-transition:leave-start="scale-100" x-transition:leave-end="scale-0"></span>
                                </span>
                            </a>

                            <a href="#_"
                                class="relative font-medium leading-6 text-gray-600 transition duration-150 ease-out hover:text-gray-900"
                                x-data="{ hover: false }" @mouseenter="hover = true" @mouseleave="hover = false">
                                <span class="block">Blog</span>
                                <span class="absolute bottom-0 left-0 inline-block w-full h-0.5 -mb-1 overflow-hidden">
                                    <span x-show="hover"
                                        class="absolute inset-0 inline-block w-full h-1 h-full transform bg-gray-900"
                                        x-transition:enter="transition ease duration-200"
                                        x-transition:enter-start="scale-0" x-transition:enter-end="scale-100"
                                        x-transition:leave="transition ease-out duration-300"
                                        x-transition:leave-start="scale-100" x-transition:leave-end="scale-0"></span>
                                </span>
                            </a>

                        </nav>

                        <div class="relative z-10 inline-flex items-center space-x-3 md:ml-5 lg:justify-end">
                            <span class="inline-flex rounded-md shadow-sm">
                                <a href="#"
                                    class="inline-flex items-center justify-center px-4 py-2 text-base font-medium leading-6 text-white whitespace-no-wrap bg-blue-600 border border-blue-700 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                                    data-rounded="rounded-md" data-primary="blue-600">
                                    <h4>User:</h4>
                                    <h4 class="pl-2" id="user">Name</h4>

                                </a>
                            </span>
                        </div>
                    </div>
                </section>

            </section>

            <section class="bg-white white:bg-gray-900">
                <div class="py-8 lg:py-16 px-4 mx-auto max-w-screen-md">
                    <h2 class="mb-4 text-4xl tracking-tight font-extrabold text-center text-gray-900 white:text-white">
                        Enter information</h2>
                    <p class="mb-8 lg:mb-16 font-light text-center text-gray-500 white:text-gray-400 sm:text-xl">Please
                        fill in all the information so we can add all the information to the template you have chosen.
                    </p>
                    <form id="form" action="#" class="space-y-8">

                        <div>
                            <label for="fullName"
                                class="block mb-2 text-sm font-medium text-gray-900 white:text-gray-300">Tên đầy đủ của
                                bạn</label>
                            <input type="text" id="fullName"
                                class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 white:bg-gray-700 white:border-gray-600 white:placeholder-gray-400 white:text-white white:focus:ring-primary-500 white:focus:border-primary-500 white:shadow-sm-light"
                                placeholder="Nhập tên đầy đủ của bạn" required>
                        </div>

                        <div>
                            <label for="date"
                                class="block mb-2 text-sm font-medium text-gray-900 white:text-gray-300">Date of
                                birth</label>
                            <input type="date" id="date"
                                class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 white:bg-gray-700 white:border-gray-600 white:placeholder-gray-400 white:text-white white:focus:ring-primary-500 white:focus:border-primary-500 white:shadow-sm-light"
                                placeholder="Enter your birth" required>
                        </div>

                        <div>
                            <label for="phone"
                                class="block mb-2 text-sm font-medium text-gray-900 white:text-gray-300">Phone
                                number</label>
                            <input type="tel" id="phone"
                                class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 white:bg-gray-700 white:border-gray-600 white:placeholder-gray-400 white:text-white white:focus:ring-primary-500 white:focus:border-primary-500 white:shadow-sm-light"
                                placeholder="Enter your phone number" required>
                        </div>

                        <div>
                            <label for="email"
                                class="block mb-2 text-sm font-medium text-gray-900 white:text-gray-300">Email</label>
                            <input type="email" id="email"
                                class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 white:bg-gray-700 white:border-gray-600 white:placeholder-gray-400 white:text-white white:focus:ring-primary-500 white:focus:border-primary-500 white:shadow-sm-light"
                                placeholder="Enter your email" required>
                        </div>

                        <div>
                            <label for="address"
                                class="block mb-2 text-sm font-medium text-gray-900 white:text-gray-300">Address</label>
                            <input type="text" id="address"
                                class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 white:bg-gray-700 white:border-gray-600 white:placeholder-gray-400 white:text-white white:focus:ring-primary-500 white:focus:border-primary-500 white:shadow-sm-light"
                                placeholder="Enter your address" required>
                        </div>

                        <div>
                            <label for="position"
                                class="block mb-2 text-sm font-medium text-gray-900 white:text-gray-300">Position you
                                want to apply for</label>
                            <input type="text" id="position"
                                class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 white:bg-gray-700 white:border-gray-600 white:placeholder-gray-400 white:text-white white:focus:ring-primary-500 white:focus:border-primary-500 white:shadow-sm-light"
                                placeholder="Fill in" required>
                        </div>

                        <div class="sm:col-span-2">
                            <label for="presentation"
                                class="block mb-2 text-sm font-medium text-gray-900 white:text-gray-400">Presentation</label>
                            <textarea id="presentation" rows="6"
                                class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg shadow-sm border border-gray-300 focus:ring-primary-500 focus:border-primary-500 white:bg-gray-700 white:border-gray-600 white:placeholder-gray-400 white:text-white white:focus:ring-primary-500 white:focus:border-primary-500"
                                placeholder="Please fill out completely"></textarea>
                        </div>

                        <div
                            class="flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b white:border-gray-600">

                            <button data-modal-hide="default-modal" type="submit"
                                class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center white:bg-blue-600 white:hover:bg-blue-700 white:focus:ring-blue-800">I
                                have filled in all information</button>

                        </div>
                    </form>
            </section>


        </section>
    </div>

    <footer class="bg-white white:bg-gray-900">
        <div class="mx-auto w-full max-w-screen-xl p-4 py-6 lg:py-8">
            <div class="md:flex md:justify-between">
                <div class="mb-6 md:mb-0">
                    <a href="https://flowbite.com/" class="flex items-center">
                        <img src="https://flowbite.com/docs/images/logo.svg" class="h-8 me-3" alt="FlowBite Logo" />
                        <span
                            class="self-center text-2xl font-semibold whitespace-nowrap white:text-white">Flowbite</span>
                    </a>
                </div>
                <div class="grid grid-cols-2 gap-8 sm:gap-6 sm:grid-cols-3">
                    <div>
                        <h2 class="mb-6 text-sm font-semibold text-gray-900 uppercase white:text-white">Resources</h2>
                        <ul class="text-gray-500 white:text-gray-400 font-medium">
                            <li class="mb-4">
                                <a href="https://flowbite.com/" class="hover:underline">Flowbite</a>
                            </li>
                            <li>
                                <a href="https://tailwindcss.com/" class="hover:underline">Tailwind CSS</a>
                            </li>
                        </ul>
                    </div>
                    <div>
                        <h2 class="mb-6 text-sm font-semibold text-gray-900 uppercase white:text-white">Follow us</h2>
                        <ul class="text-gray-500 white:text-gray-400 font-medium">
                            <li class="mb-4">
                                <a href="https://github.com/themesberg/flowbite" class="hover:underline ">Github</a>
                            </li>
                            <li>
                                <a href="https://discord.gg/4eeurUVvTy" class="hover:underline">Discord</a>
                            </li>
                        </ul>
                    </div>
                    <div>
                        <h2 class="mb-6 text-sm font-semibold text-gray-900 uppercase white:text-white">Legal</h2>
                        <ul class="text-gray-500 white:text-gray-400 font-medium">
                            <li class="mb-4">
                                <a href="#" class="hover:underline">Privacy Policy</a>
                            </li>
                            <li>
                                <a href="#" class="hover:underline">Terms &amp; Conditions</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <hr class="my-6 border-gray-200 sm:mx-auto white:border-gray-700 lg:my-8" />
            <div class="sm:flex sm:items-center sm:justify-between">
                <span class="text-sm text-gray-500 sm:text-center white:text-gray-400">© 2023 <a
                        href="https://flowbite.com/" class="hover:underline">Flowbite™</a>. All Rights Reserved.
                </span>
                <a href="/Logout.html">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 15 15">
                        <path fill="none" stroke="currentColor" d="m13.5 7.5l-3 3.25m3-3.25l-3-3m3 3H4m4 6H1.5v-12H8" />
                    </svg>
                </a>
            </div>
        </div>
    </footer>

    <script>

        const fullNameInfo = document.getElementById("fullName");
        const user_info = JSON.parse(localStorage.getItem("user"));
        if (user_info) {
            fullNameInfo.value = user_info.displayName
        }

        const email = document.getElementById("email");
        if (user_info) {
            email.value = user_info.email
        }
    </script>

    <script>
        const userInfo = document.getElementById("user");
        if (userInfo) {
            userInfo.innerHTML = user_info.displayName
        }
    </script>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const template = urlParams.get("template");

        const form = document.getElementById("form");
        const dob = document.getElementById("date");
        const phone = document.getElementById("phone");
        const address = document.getElementById("address");
        const position = document.getElementById("position");
        const presentation = document.getElementById("presentation");

        form.addEventListener("submit", function (e) {
            e.preventDefault();
            const applyInfo = {
                id: Math.floor(Math.random() * 1000000),
                name: fullNameInfo.value.trim(),
                email: email.value.trim(),
                date: date.value.trim(),
                phone: phone.value.trim(),
                address: address.value.trim(),
                position: position.value.trim(),
                presentation: presentation.value.trim(),
                template: Number(template),
                created_by: user_info.uid,
            }

            // Lấy danh sách CV từ localStorage
            const CVs = JSON.parse(localStorage.getItem("cvs")) || [];
            CVs.push(applyInfo);
            localStorage.setItem("cvs", JSON.stringify(CVs));

            alert("Tạo CV thành công")
            window.location.href = `/Preview${template}.html?cv=${applyInfo.id}`
        })
    </script>

</body>

</html>